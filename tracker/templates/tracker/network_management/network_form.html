{% extends "tracker/base.html" %}

{% block title %}{{ page_title|default:"Network Form" }}{% endblock %}

{% block content %}
<h2>{{ page_title }}</h2>
<p>Assessment #{{ assessment.id }} for {{ assessment.client.name }}</p>

<form method="post" novalidate>
    {% csrf_token %}

    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            {% for error in form.non_field_errors %}
                <p>{{ error }}</p>
            {% endfor %}
        </div>
    {% endif %}

    {# Render form fields manually or using as_p/as_table #}
    <div class="mb-3">
        <label for="{{ form.name.id_for_label }}" class="form-label">{{ form.name.label }}*</label>
        {{ form.name }}
         {% if form.name.errors %}<div class="invalid-feedback d-block">{{ form.name.errors }}</div>{% endif %}
         {% if form.name.help_text %}<small class="form-text text-muted">{{ form.name.help_text }}</small>{% endif %}
    </div>
     <div class="mb-3">
        <label for="{{ form.description.id_for_label }}" class="form-label">{{ form.description.label }}</label>
        {{ form.description }}
         {% if form.description.errors %}<div class="invalid-feedback d-block">{{ form.description.errors }}</div>{% endif %}
         {% if form.description.help_text %}<small class="form-text text-muted">{{ form.description.help_text }}</small>{% endif %}
    </div>
    <div class="row">
         <div class="col-md-6 mb-3">
            <label for="{{ form.ip_range.id_for_label }}" class="form-label">{{ form.ip_range.label }}</label>
            {{ form.ip_range }}
             {% if form.ip_range.errors %}<div class="invalid-feedback d-block">{{ form.ip_range.errors }}</div>{% endif %}
             {% if form.ip_range.help_text %}<small class="form-text text-muted">{{ form.ip_range.help_text }}</small>{% endif %}
        </div>
         <div class="col-md-6 mb-3">
            <label for="{{ form.vlan_id.id_for_label }}" class="form-label">{{ form.vlan_id.label }}</label>
            {{ form.vlan_id }}
             {% if form.vlan_id.errors %}<div class="invalid-feedback d-block">{{ form.vlan_id.errors }}</div>{% endif %}
             {% if form.vlan_id.help_text %}<small class="form-text text-muted">{{ form.vlan_id.help_text }}</small>{% endif %}
        </div>
    </div>
     <div class="mb-3">
        <label for="{{ form.notes.id_for_label }}" class="form-label">{{ form.notes.label }}</label>
        {{ form.notes }}
         {% if form.notes.errors %}<div class="invalid-feedback d-block">{{ form.notes.errors }}</div>{% endif %}
         {% if form.notes.help_text %}<small class="form-text text-muted">{{ form.notes.help_text }}</small>{% endif %}
    </div>


    <button type="submit" class="btn btn-success">{% if object %}Save Changes{% else %}Create Network{% endif %}</button>
    <a href="{% url 'tracker:network_list' assessment.pk %}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}