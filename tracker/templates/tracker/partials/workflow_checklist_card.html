{% load i18n static tracker_tags %}

<div class="card mb-4" id="workflow-checklist-card-{{ assessment.pk }}">
  <div class="card-header bg-light">
    <h5 class="mb-0">
        <i class="fas fa-clipboard-list me-2"></i>{% translate "Detailed Workflow Checklist" %}
    </h5>
  </div>
  <div class="card-body p-0">
    {% if workflow_steps_list %}
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th style="width:5%;" class="ps-3 text-center">{% translate "Order" %}</th>
              <th style="width:35%;">{% translate "Requirement" %}</th>
              <th style="width:15%;" class="text-center">{% translate "Assigned To" %}</th>
              <th style="width:15%;" class="text-center">{% translate "Status" %}</th>
              <th style="width:30%;" class="pe-3">{% translate "Actions / Notes" %}</th>
            </tr>
          </thead>
          <tbody>
            {% for step_item_loopvar in workflow_steps_list %} {# Changed loop var name for clarity #}
              {# Include the new row partial for each step #}
              {% include "tracker/partials/workflow_checklist_row.html" with assessment=assessment step_item=step_item_loopvar status_choices=status_choices %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="p-3"><p class="text-muted mb-0">{% translate "Workflow steps not yet generated." %}</p></div>
    {% endif %}
  </div>
  <div class="card-footer text-end bg-light border-top-0">
      <small class="text-muted">{% translate "Checklist overview for assessment" %} #{{ assessment.id }}</small>
  </div>
</div>